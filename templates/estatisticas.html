<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="CRM para a gestão de visitantes e membros da Igreja Mais de Cristo Canasvieiras">
  <meta name="keywords" content="igreja, CRM, visitantes, membros, cadastro, WhatsApp, estatísticas">
  <meta name="author" content="Igreja Mais de Cristo">
  <title>📊 Estatísticas - CRM Church</title>

  <link rel="stylesheet" href="/static/estatisticas.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="/static/estatisticas.js" defer></script>
</head>

<body>
  <header>
    <img src="/static/logo_maisdecristo_b2.png" alt="Logo Igreja Mais de Cristo" id="logo">
    <h1>📈 Estatísticas do Ministério de Integração</h1>
  </header>

  <main id="mainContent">
    <section id="statisticsContainer">
      <div id="filtroPeriodo">
        <label for="periodoSelect">📅 Filtrar por período:</label>
        <select id="periodoSelect">
          <option value="3">Últimos 3 meses</option>
          <option value="6" selected>Últimos 6 meses</option>
          <option value="12">Últimos 12 meses</option>
          <option value="0">Todo o período</option>
        </select>
      </div>

      <!-- 🔹 Gráficos Principais -->
      <h2>📈 Indicadores Gerais</h2>
      <div class="grid-2">
        <div class="info-card">
          <h3>Evolução Mensal dos Cadastros</h3>
          <canvas id="graficoMensal"></canvas>
        </div>
        <div class="info-card">
          <h3>Origem dos Cadastros</h3>
          <canvas id="graficoOrigem"></canvas>
        </div>
      </div>

      <div class="grid-1">
        <div class="info-card">
          <h3>Distribuição por Fase / Status</h3>
          <canvas id="graficoFases"></canvas>
        </div>
      </div>

      <!-- 🔹 Perfil Demográfico -->
      <h2>👥 Perfil Demográfico</h2>
      <div class="grid-3">
        <div class="info-card" id="idadeMedia">
          <h3>Idade Média e Faixas Etárias</h3>
          <p>Carregando...</p>
        </div>
        <div class="info-card">
          <h3>Distribuição por Estado Civil</h3>
          <canvas id="graficoEstadoCivil"></canvas>
        </div>
        <div class="info-card">
          <h3>Principais Cidades</h3>
          <canvas id="graficoCidades"></canvas>
        </div>
      </div>

      <!-- 🔹 Totais -->
      <h2>📊 Resumo Numérico</h2>
      <div class="grid-3">
        <div class="info-card" id="totalVisitantesInicio">
          <h3>Visitantes na Fase INÍCIO</h3>
          <p>Carregando...</p>
        </div>
        <div class="info-card" id="discipuladosAtivos">
          <h3>Em Discipulado</h3>
          <p>Carregando...</p>
        </div>
        <div class="info-card" id="totalPedidosOracao">
          <h3>Pedidos de Oração</h3>
          <p>Carregando...</p>
        </div>
      </div>

      <div class="grid-3">
        <div class="info-card" id="totalHomens">
          <h3>Homens</h3>
          <p>Carregando...</p>
        </div>
        <div class="info-card" id="totalMulheres">
          <h3>Mulheres</h3>
          <p>Carregando...</p>
        </div>
        <div class="info-card" id="conversasEnviadasRecebidas">
          <h3>Conversas</h3>
          <p>Carregando...</p>
        </div>
      </div>
    </section>

    <!-- MENU -->
    <section id="menuLinks">
      <h3>Acessar Outros Módulos</h3>
      <div class="menu-buttons">
        <button onclick="window.location.href='/app/visitantes'" class="btn-primary">👤 Visitantes</button>
        <button onclick="window.location.href='/app/membros'" class="btn-tertiary">👥 Membros</button>
        <button onclick="window.location.href='/app/acolhidos'" class="btn-quaternary">💬 Acolhidos</button>
        <button onclick="window.location.href='/app/ia'" class="btn-tertiary">🧠 Treinar IA</button>
        <button onclick="window.location.href='/app/campanhas'" class="btn-warning">📣 Campanhas</button>
        <button onclick="window.location.href='/app/menu'" class="btn-secondary">⬅ Voltar ao Menu</button>
      </div>
    </section>
  </main>

  <footer>
    <p>© 2025 Nous Tecnologia. Todos os direitos reservados. - versão 3.5</p>
  </footer>
</body>
</html>
